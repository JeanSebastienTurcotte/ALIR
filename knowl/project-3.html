<!DOCTYPE html>
<html lang="fr-CA" dir="ltr">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
<script>// Make *any* pre with class 'sagecell-sage' an executable Sage cell
// Their results will be linked, only within language type
sagecell.makeSagecell({
  "inputLocation": "pre.sagecell-sage",
  "linked": true,
  "languages": [
    "sage"
  ],
  "evalButtonText": "Évaluer (Sage)"
});
</script>
</head>
<body class="ignore-math">
<article class="project project-like"><h3 class="heading">
<span class="type">Projet</span><span class="space"> </span><span class="codenumber">2.5.2</span><span class="period">.</span><span class="space"> </span><span class="title">Anaglyphe.</span>
</h3>
<div class="introduction">
<div class="para">Ce laboratoire est une adaptation sur Sage du projet “Anaglyphe et visualisation 3D”, disponible sur <a class="external" href="http://projetsmathematiquests.com/projets.php" target="_blank"><code class="code-inline tex2jax_ignore">projetsmathematiquests.com</code></a>, sous licence creative commons.</div> <div class="para">Le cerveau humain est capable de grandes choses. À partir d’images sur une feuille ou un écran, il est capable de percevoir de la profondeur et du relief. La stéréoscopie est l’ensemble des techniques mises en œuvre pour reproduire une perception de ce relief à partir d’images planes. Un anaglyphe est une paire d’images, chacune étant de la couleur complémentaire à l’autre, qui est regardée au travers d’un filtre. Chaque image représente la même figure, mais légèrement décalée. Le plus répandu des anaglyphes est celui où l’œil gauche est affecté d’un filtre rouge et l’œil droit d’un filtre cyan. Dans ce laboratoire, on construit, dans un premier temps, l’anaglyphe d’un objet commun, que l’on animera. Dans un deuxième temps, après s’être familiarisé avec la création, on construit une maquette, pouvant être composée de plusieurs objets.</div>
</div>
<article class="task exercise-like"><h4 class="heading"><span class="codenumber">(a)</span></h4>
<div class="para">Pour commencer, on choisit de construire un objet simple afin de bien comprendre le fonctionnement d’un anaglyphe et sa construction sur Sage. La commande <code class="code-inline tex2jax_ignore">line</code> permet de relier une série de points, formant ainsi un objet connecté. On trace ensuite une ligne entre chaque point et le suivant dans la liste, jusqu’à l’avant-dernier point. Compléter la commande ci-dessous afin de construire une pyramide à base carrée dont les côtés mesurent <span class="process-math">\(2\)</span> unités, centrée à l’origine et de hauteur $6$ unités. Il faudra répéter des points afin de produire un dessin complet.</div> <pre class="ptx-sagecell sagecell-sage" id="sage-129"><script type="text/x-sage">Listepoints=[[2,2,0],[2,-2,0],[-2,-2,0],[-2,2,0],[0,0,6]#Compléter cette liste avec des points pour former l'objet
]
line(Listepoints,frame=False,color="black",projection="orthographic",viewpoint=[[-1,-1,-1],120])
</script></pre> <div class="para">Il est possible de déplacer le point de vue en manipulant la figure créée. Les options <code class="code-inline tex2jax_ignore">projection="orthographic",viewpoint=[[-1,-1,-1],120]</code> ont été choisies afin qu’il n’y ait pas d’effet de perspective et pour que l’angle de vue par défaut soit celui correspondant au plan <span class="process-math">\(y\)</span>-<span class="process-math">\(z\text{,}\)</span> qui est l’écran de l’utilisateur dans le repère utilisé.</div></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(b)</span></h4>
<div class="para">La projection sur l’écran de l’objet proposé n’est pas très intéressante à regarder, puisqu’il d’un triangle qui ne rend pas l’impression des trois dimensions. On s’imagine un repère dont l’origine est au centre de l’écran d’ordinateur. L’axe des <span class="process-math">\(x\)</span> pointe vers l’utilisateur, entre ses deux yeux. L’axe des <span class="process-math">\(y\)</span> et l’axe des <span class="process-math">\(z\)</span> forment le plan représentant l’écran. On peut choisir de déplacer le point de vue, par rapport à ce repère, ou encore de transformer l’objet en utilisant des transformations linéaires ou des translations. La première option peut être effectuée en manipulant la figure ou en modifiant l’option <code class="code-inline tex2jax_ignore">viewpoint</code> dans la command <code class="code-inline tex2jax_ignore">line</code>. Dans le but d’explorer les transformations linéaires, on choisit la deuxième option. On va transformer l’objet en utilisant deux transformations linéaires ainsi qu’une translation. D’abord, on lui applique une rotation par rapport à l’axe des <span class="process-math">\(z\text{.}\)</span> Par défaut, on choisit un angle de <span class="process-math">\(\frac{\pi}{4}\text{,}\)</span> mais il sera possible de modifier cet angle plus tard. Ensuite, on applique une rotation par rapport à l’axe des <span class="process-math">\(y\text{,}\)</span> d’un angle de <span class="process-math">\(\frac{\pi}{6}\)</span> cette fois. Enfin, on termine avec une translation de <span class="process-math">\((5,0,0)\text{,}\)</span> ce qui a pour effet d’amener l’objet « devant » l’écran. Compléter le code ci-dessous afin de transformer l’objet. Pour appliquer une ou plusieurs matrices à une liste d’objets, on peut utiliser la commande <code class="code-inline tex2jax_ignore">Pointstransformes=[T*P+t for P in Listepoints]</code> où <span class="process-math">\(T\)</span> est la combinaison des transformations linéaires et <span class="process-math">\(t\)</span> est la translation.</div> <pre class="ptx-sagecell sagecell-sage" id="sage-130"><script type="text/x-sage">thetaz=# À compléter
thetay=# À compléter
Rotz=# À compléter
Roty=# À compléter
translation=# À compléter
Pointstransformes=# À compléter
line(Pointstransformes,frame=False,color="black",projection="orthographic",viewpoint=[[-1,-1,-1],120])
</script></pre></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(c)</span></h4>
<div class="para">Maintenant que l’objet est en place, dans une orientation intéressante, on le projette sur le plan à deux dimensions formé des axes <span class="process-math">\(y\)</span> et <span class="process-math">\(z\text{.}\)</span> Afin de créer les maquettes qui composent l’anaglyphe, on a le choix de le faire dans l’espace à trois dimensions ou de voir le plan <span class="process-math">\(y,z\)</span> sur lequel les maquettes se trouvent comme une copie de <span class="process-math">\(\mathbb{R}^2\text{.}\)</span> On choisit la deuxième option. Pour arriver à effectuer la projection, on doit établir la position de chacun des yeux de l’observateur. On rappelle que dans le repère, l’axe des <span class="process-math">\(x\)</span> pointe en plein milieu des deux yeux de l’utilisateur. La composante <span class="process-math">\(x\)</span> des deux yeux est donc la distance entre l’utilisateur et l’écran. Pour les composantes <span class="process-math">\(y\text{,}\)</span> elles sont, respectivement pour l’œil gauche et l’œil droit, la moitié de la distance entre le centre des yeux de l’utilisateur. Finalement, la composante <span class="process-math">\(z\)</span> des yeux est zéro. Compléter le code ci-dessous avec les mesures correspondantes.</div> <pre class="ptx-sagecell sagecell-sage" id="sage-131"><script type="text/x-sage">ecran=#À compléter
yeux=#À compléter
gauche=vector([ecran,-yeux/2,0])
droit=vector([ecran,yeux/2,0])
</script></pre></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(d)</span></h4>
<div class="para logical">
<div class="para">Pour la première projection, on regarde l’œil gauche. Le côté gauche de la lunette est normalement monté d’un filtre rouge. Parmi les deux projections, l’œil gauche ne verra donc que l’objet cyan.  On va créer la projection de l’objet sur l’écran telle que vue par l’œil gauche pour ensuite le colorer en cyan. Pour cela, on imagine une droite passant par l’œil gauche, situé au point <span class="process-math">\(G\text{,}\)</span> et chacun des points <span class="process-math">\(P\)</span> de l’objet. Cette droite intersecte le plan <span class="process-math">\(x\)</span>-<span class="process-math">\(y\)</span> en un point.</div>
<ol class="decimal">
<li><div class="para">Créer une fonction qui prend comme argument un paramètre $k$ et un point $P$ et qui retourne l’équation vectorielle de la droite passant par $G$ et $P$;</div></li>
<li><div class="para">Créer une liste qui, pour chaque point $P$, contient la valeur de $k$ nécessaire pour que le point sur la droite soit également sur le plan $y$-$z$;</div></li>
<li><div class="para">Créer la liste <code class="code-inline tex2jax_ignore">pointscyans</code> contenant la liste des points projetés sur le plan $x$-$y$;</div></li>
<li><div class="para">Créer la maquette cyan</div></li>
</ol>
</div> <pre class="ptx-sagecell sagecell-sage" id="sage-132"><script type="text/x-sage">#Équation de la droite
var("k")
def Dgauche(k,P):
    P=vector(P)
    return #À compléter
</script></pre> <div class="para">Pour chaque point <span class="process-math">\(P\text{,}\)</span> on veut déterminer la valeur du paramètre <span class="process-math">\(k\)</span> qui correspond au point sur le plan. On utilise la commande <code class="code-inline tex2jax_ignore">solve</code> pour déterminer la valeur de <span class="process-math">\(k\text{.}\)</span> Cette commande retourne une liste d’équations. Puisqu’on sait qu’il n’y aura qu’une solution à l’équation que l’on veut résoudre, on utilise <code class="code-inline tex2jax_ignore">[0]</code> pour faire ressortir la première et seule équation et la commande <code class="code-inline tex2jax_ignore">.rhs()</code> afin d’obtenir le côté droit de l’égalité, qui correspond à la valeur de <span class="process-math">\(k\text{.}\)</span>
</div> <pre class="ptx-sagecell sagecell-sage" id="sage-133"><script type="text/x-sage">#Liste des valeurs de k
paramkcyans=[solve(#Àcompléter ,k)[0].rhs() for P in Pointstransformes]
</script></pre> <div class="para">La commande <code class="code-inline tex2jax_ignore">zip</code> permet de combiner deux listes en une seule en joignant les éléments correspondants. Par exemple, <code class="code-inline tex2jax_ignore">list(zip([1,2,3],[4,5,6]))</code> produit la liste <code class="code-inline tex2jax_ignore">[(1,4),(2,5),(3,6)]</code>.</div> <pre class="ptx-sagecell sagecell-sage" id="sage-134"><script type="text/x-sage">#Ceci n'est qu'un exemple illustrant zip.
list(zip([1,2,3],[4,5,6]))
</script></pre> <div class="para">On utilise cette commande pour grouper les listes <code class="code-inline tex2jax_ignore">Pointstransformes</code> et <code class="code-inline tex2jax_ignore">paramk</code>.</div> <pre class="ptx-sagecell sagecell-sage" id="sage-135"><script type="text/x-sage">L=zip(paramkcyans,Pointstransformes)
</script></pre> <div class="para">La liste <code class="code-inline tex2jax_ignore">pointscyans</code> est créée en allant chercher les bonnes composantes dans l’équation de la droite <code class="code-inline tex2jax_ignore">Dgauche(k,P)</code> pour la valeur de <span class="process-math">\(k\)</span> associée au point <span class="process-math">\(P\text{.}\)</span> On cherche à obtenir une liste de listes. Chacune des listes intérieures représente les composantes de la projection d’un point $P$ sur le plan $y$-$z$ vue comme si elle était dans un espace à deux dimensions.  Compléter la cellule ci-dessous.</div> <pre class="ptx-sagecell sagecell-sage" id="sage-136"><script type="text/x-sage">#La valeurs des points cyans. On note l'utilisation de la liste L créée par la commande zip.
pointscyans=[[#À compléter] for k,P in L]
</script></pre> <div class="para">Finalement, on crée la maquette cyan.</div> <pre class="ptx-sagecell sagecell-sage" id="sage-137"><script type="text/x-sage">graphiquecyan=line(pointscyans,color="cyan",axes=False)
graphiquecyan
</script></pre></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(e)</span></h4>
<div class="para logical">
<div class="para">Pour la deuxième projection, on regarde l’œil droit. Le côté droit de la lunette est normalement monté d’un filtre cyan. Parmi les deux projections, l’œil droit ne verra donc que l’objet rouge.  On va créer la projection de l’objet sur l’écran telle que vu par l’œil droit et le colorer en rouge. Pour cela, on imagine une droite passant par l’œil droit, situé au point <span class="process-math">\(D\text{,}\)</span> et chacun des points <span class="process-math">\(P\)</span> de l’objet. Cette droite intersecte le plan <span class="process-math">\(x\)</span>-<span class="process-math">\(y\)</span> en un point.</div>
<ol class="decimal">
<li><div class="para">Créer une fonction qui prend comme argument un paramètre <span class="process-math">\(k\)</span> et un point <span class="process-math">\(P\)</span> et qui retourne l’équation vectorielle de la droite passant par <span class="process-math">\(D\)</span> et <span class="process-math">\(P\text{.}\)</span>
</div></li>
<li><div class="para">Créer une liste qui, pour chaque point <span class="process-math">\(P\text{,}\)</span> contient la valeur de <span class="process-math">\(k\)</span> nécessaire pour que le point sur la droite soit également sur le plan <span class="process-math">\(x\)</span>-<span class="process-math">\(y\text{.}\)</span>
</div></li>
<li><div class="para">Créer la liste <code class="code-inline tex2jax_ignore">pointsrouges</code> contenant la liste des points projetés sur le plan <span class="process-math">\(x\)</span>-<span class="process-math">\(y\text{.}\)</span>
</div></li>
<li><div class="para">Créer la maquette rouge</div></li>
</ol>
</div></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(f)</span></h4>
<div class="para">Enfin, on veut afficher les deux morceaux de l’anaglyphe en un seul graphique.</div> <pre class="ptx-sagecell sagecell-sage" id="sage-143"><script type="text/x-sage">#Afficher les deux graphiques 
#À compléter
</script></pre></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(g)</span></h4>
<div class="para">Pour explorer davantage, on utilise Sage pour animer l’anaglyphe à l’aide de curseurs. Les curseurs permettent de modifier les angles des rotations, la translation choisie ainsi que les paramètres de distance avec l’écran et de distance entre les yeux. Pour cela, on utilise un <code class="code-inline tex2jax_ignore">interact</code>, objet Sage permettant, entre autres, de créer des curseurs et de produire du contenu dynamique. Le squelette est fourni avec une partie à compléter. Le code commence par <code class="code-inline tex2jax_ignore">@interact</code>, ce qui active le mode interactif de Sage. Ensuite, on définit la fonction `anaglyphe` dont les arguments sont un ensemble de curseurs (<code class="code-inline tex2jax_ignore">slider</code>) et une boite d’entrée (<code class="code-inline tex2jax_ignore">input_box</code>). Des valeurs par défauts sont fournies. Sous la ligne initialisant la fonction, on applique une commande Sage qui convertit la liste des points en objet Sage et l’on crée un graphique vide  dans lequel on ajoutera l’anaglyphe. Compléter le code afin de créer l’application interactive.</div>
<pre class="ptx-sagecell sagecell-sage" id="sage-144"><script type="text/x-sage">@interact
def anaglyphe(P=input_box(default='{"objet1":[[0, 0, 0],[1, 0, 0],[1, 1, 0],[0, 1, 0],[0, 0, 0],[0, 0, 1],[1, 0, 1],[1, 1, 1],[0, 1, 1],[0, 0, 1],[0, 1, 1],[1, 1, 1],[1, 1, 0],[1, 0, 0],[1, 0, 1],[0, 0, 1],[1, 0, 1],[1, 1, 1],[1, 1, 0],[0, 1, 0],[0, 1, 1]]}', type = str, label = 'Points = '),ecran=slider(20,60,0.5,default=30),yeux=slider(2,8,0.5,default=6),thetaz=slider(0, 2*pi, 0.01, default=0,label='Rotation z'),
                thetay=slider(0, pi, 0.01, default=0,label='Rotation y'),
                translation=slider(0, 20, 0.1, default=0,label="Translation")):
    P=sage_eval(P)
    graph=plot([])
    #Écrire les matrices et le vecteur de transformation
    #À compléter
    #Position des yeux
    #À compléter
    for objet in P.values():
        Points=objet
        #Transformer les points
        #À compléter
        #Maquettes
        #À compléter
        # Display the results
        graph+=#À compléter
    show(graph)
</script></pre></article><article class="task exercise-like"><h4 class="heading"><span class="codenumber">(h)</span></h4>
<div class="para">La commande <code class="code-inline tex2jax_ignore">line</code> relie tous les points d’une liste. Il peut être utile de privilégier des objets distincts afin de créer une maquette plus intéressante. La manière dont la fonction <code class="code-inline tex2jax_ignore">anaglyphe</code> ci-dessus a été créée permet d’avoir plusieurs objets et de construire leur anaglyphe respectif. La fonction <code class="code-inline tex2jax_ignore">anaglype</code> prend comme entrée un dictionnaire composé d’objets et leurs points. Dans la boite d’entrée, écrire <code class="code-inline tex2jax_ignore">{"cube":[[0, 0, 0],[1, 0, 0],[1, 1, 0],[0, 1, 0],[0, 0, 0],[0, 0, 1],[1, 0, 1],[1, 1, 1],[0, 1, 1],[0, 0, 1],[0, 1, 1],[1, 1, 1],[1, 1, 0],[1, 0, 0],[1, 0, 1],[0, 0, 1],[1, 0, 1],[1, 1, 1],[1, 1, 0],[0, 1, 0],[0, 1, 1]],"tetraedre":[[-1,-1,-1],[1,-1,-1],[0,1,-1],[-1,-1,-1],[0,0,2],[1,-1,-1],[0,0,2],[0,1,-1],[1,-1,-1],[0,1,-1],[0,0,2],[-1,-1,-1]]}</code> afin de voir un cube et un tétraèdre en anaglyphe.</div> <div class="para">Créer un objet artistique. Les restrictions sont peu nombreuses, mais on demande au minimum une maquette composée d’au moins deux objets distincts, chacun formé d’au moins dix points.</div></article></article><span class="incontext"><a href="sec-transfolabos.html#project-3" class="internal">Contexte</a></span>
</body>
</html>
